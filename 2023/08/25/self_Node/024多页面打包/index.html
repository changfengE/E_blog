<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="true" > 
<link href="/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/fontawesome/css/brands.css" rel="stylesheet">
<link href="/fontawesome/css/solid.css" rel="stylesheet">
<!-- 2023-9-19 添加统一的prism -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" /> 
<script src="/js/color.global.min.js" ></script>
<script src="/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  

  
  <title>多页面打包 | cfE_blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" href="/css/fonts/Roboto-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link rel="preload" href="/css/fonts/Roboto-Bold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link rel="preload" href="/css/fonts/MaterialSymbolsRounded.woff2" as="font" type="font/woff2" crossorigin="anonymous">

  <meta name="description" content="多页面打包                                                                                               多页面打包#                              单页面                 ：单个html文件 ，">
<meta property="og:type" content="article">
<meta property="og:title" content="多页面打包">
<meta property="og:url" content="https://changfenge.github.io/2023/08/25/self_Node/024%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85/index.html">
<meta property="og:site_name" content="cfE_blog">
<meta property="og:description" content="多页面打包                                                                                               多页面打包#                              单页面                 ：单个html文件 ，">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_01%E5%8A%A8%E6%80%81%E6%B3%A8%E5%85%A5.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_02content%E8%B5%84%E6%BA%90.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_03%E6%89%93%E5%8C%85%E5%AE%8C%E6%88%90.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_04%E6%9C%AA%E7%99%BB%E5%BD%95.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_05%E6%AD%A3%E5%B8%B8%E7%99%BB%E5%BD%95.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_06npm%E6%9F%A5%E6%89%BE%E5%90%8D%E5%AD%97.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_07npm%E6%9F%A5%E6%89%BE%E5%90%8D%E5%AD%97.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_08%E6%89%93%E5%8C%85%E5%AE%8C%E6%88%90.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_09%E5%A4%96%E9%83%A8%E6%89%A9%E5%B1%95.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_10%E5%8F%91%E5%B8%83%E9%A1%B5%E6%95%88%E6%9E%9C.png">
<meta property="og:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_11%E6%B5%8B%E8%AF%95%E5%8A%9F%E8%83%BD.png">
<meta property="article:published_time" content="2023-08-25T09:22:10.000Z">
<meta property="article:modified_time" content="2023-09-12T09:52:55.541Z">
<meta property="article:author" content="changfeng_E">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="nodejs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://changfenge.github.io/assets/images/self_Node/024_cut_01%E5%8A%A8%E6%80%81%E6%B3%A8%E5%85%A5.png">
  
  
    <link rel="shortcut icon" href="/xiaohei.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  
  
    
<div id="banner" class="">
  <img src="/assets/%E8%8A%B1%E8%8A%B1bg02.jpg" itemprop="image">
  <div id="banner-dim"></div>
</div>
 
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>cfE_blog </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/">主页</a>
    
      <a class="main-nav-link" href="/archives">轨迹</a>
    
      <a class="main-nav-link" href="/about">更多</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="material-symbols-rounded light-mode-icon">wb_sunny</span>
      <span class="material-symbols-rounded dark-mode-icon">dark_mode</span>
    </a>
    
    <a id="nav-search-btn" class="nav-icon" title="搜索" style="display: none;">
      <span class="material-symbols-rounded">search</span>
    </a>
    <div id="nav-menu-btn" class="nav-icon">
      <span class="material-symbols-rounded">menu</span>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/">主页</a>
    
      <a class="nav-dropdown-link" href="/archives">轨迹</a>
    
      <a class="nav-dropdown-link" href="/about">更多</a>
    
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
        <image src=/assets/%E7%BD%97%E5%B0%8F%E9%BB%9102.png></image>
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">changfeng_E </div>
      <div class="dot"></div>
      <div class="subtitle">about me </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com/changfengE" title="GitHub"><i class="fa-brands fa-github"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://gitee.com/changfengE" title="Gitee"><i class="fa-brands fa-square-git"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/285349009?spm_id_from=333.1007.0.0" title="bilibili"><i class="fa-brands fa-bilibili"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">最新文章</h3>
      <ul>
        
          <a class="recent-link" href="/2023/10/10/self_Vue/016%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/" title="组件通信" >
            <div class="recent-link-text">
              组件通信
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/08/self_Vue/015scoped%E6%A0%B7%E5%BC%8F%E5%86%B2%E7%AA%81&data/" title="scoped样式冲突&data" >
            <div class="recent-link-text">
              scoped样式冲突&amp;data
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/07/self_Vue/014%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91&%E6%A0%B9%E7%BB%84%E4%BB%B6/" title="组件化开发&根组件" >
            <div class="recent-link-text">
              组件化开发&amp;根组件
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/06/self_Vue/013%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%BC%80%E5%8F%91&%E8%84%9A%E6%89%8B%E6%9E%B6VueCLI/" title="工程化开发&脚手架VueCLI" >
            <div class="recent-link-text">
              工程化开发&amp;脚手架VueCLI
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/05/self_Vue/012-%E6%A1%88%E4%BE%8B04%E5%B0%8F%E9%BB%91%E8%AE%B0%E8%B4%A6%E6%B8%85%E5%8D%95/" title="案例-小黑记账清单" >
            <div class="recent-link-text">
              案例-小黑记账清单
            </div>
          </a>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">标签</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/Ajax/" rel="tag">Ajax</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/CSS3/" rel="tag">CSS3</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/HTML5/" rel="tag">HTML5</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/hexo-use/" rel="tag">hexo_use</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/jQuery/" rel="tag">jQuery</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/normalize/" rel="tag">normalize</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/typora/" rel="tag">typora</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/vue2/" rel="tag">vue2</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">浏览器</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">移动端</a></li></ul>
    </div>
  </div>


    
      


  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">分类</h3>
      <div class="category-box">
            <a class="category-link" href="/categories/git/">
                git
                <div class="category-count">10</div>
            </a>
        <div class="children"><div class="category-box">
            <a class="category-link" href="/categories/git/%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/">
                提交代码
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/git/ssh%E7%BB%91%E5%AE%9A/">
                ssh绑定
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/git/git%E5%AE%89%E8%A3%85%E5%8F%8A%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4/">
                git安装及部分命令
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/git/branch/">
                branch
                <div class="category-count">1</div>
            </a>
        </div></div>
            <a class="category-link" href="/categories/markdown/">
                markdown
                <div class="category-count">1</div>
            </a>
        <div class="children"><div class="category-box">
            <a class="category-link" href="/categories/markdown/%E4%BD%BF%E7%94%A8/">
                使用
                <div class="category-count">1</div>
            </a>
        </div></div>
            <a class="category-link" href="/categories/hexo%E5%88%9D%E4%BD%93%E9%AA%8C/">
                hexo初体验
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/HTML5-CSS3/">
                HTML5&CSS3
                <div class="category-count">15</div>
            </a>
        
            <a class="category-link" href="/categories/hexo/">
                hexo
                <div class="category-count">1</div>
            </a>
        <div class="children"><div class="category-box">
            <a class="category-link" href="/categories/hexo/using/">
                using
                <div class="category-count">1</div>
            </a>
        </div></div>
            <a class="category-link" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">
                浏览器
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">
                移动端
                <div class="category-count">16</div>
            </a>
        
            <a class="category-link" href="/categories/nodejs/">
                nodejs
                <div class="category-count">25</div>
            </a>
        
            <a class="category-link" href="/categories/Ajax/">
                Ajax
                <div class="category-count">23</div>
            </a>
        
            <a class="category-link" href="/categories/mynormalize/">
                mynormalize
                <div class="category-count">3</div>
            </a>
        <div class="children"><div class="category-box">
            <a class="category-link" href="/categories/mynormalize/1-1-0/">
                1.1.0
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/mynormalize/wheels/">
                wheels
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/categories/mynormalize/1-2-0/">
                1.2.0
                <div class="category-count">1</div>
            </a>
        </div></div>
            <a class="category-link" href="/categories/vue2/">
                vue2
                <div class="category-count">16</div>
            </a>
        
            <a class="category-link" href="/categories/js%E5%9F%BA%E7%A1%80/">
                js基础
                <div class="category-count">42</div>
            </a>
        
            <a class="category-link" href="/categories/jQuery/">
                jQuery
                <div class="category-count">13</div>
            </a>
        </div>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">归档</h3>
      
      
        <a class="archive-link" href="/archives/2023/10 ">
          十月 2023 
          <div class="archive-count">7 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/09 ">
          九月 2023 
          <div class="archive-count">11 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/08 ">
          八月 2023 
          <div class="archive-count">54 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/07 ">
          七月 2023 
          <div class="archive-count">11 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/05 ">
          五月 2023 
          <div class="archive-count">3 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/04 ">
          四月 2023 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/03 ">
          三月 2023 
          <div class="archive-count">5 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/02 ">
          二月 2023 
          <div class="archive-count">6 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/01 ">
          一月 2023 
          <div class="archive-count">5 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/12 ">
          十二月 2022 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/11 ">
          十一月 2022 
          <div class="archive-count">4 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/09 ">
          九月 2022 
          <div class="archive-count">6 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/08 ">
          八月 2022 
          <div class="archive-count">11 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/07 ">
          七月 2022 
          <div class="archive-count">22 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/06 ">
          六月 2022 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/02 ">
          二月 2022 
          <div class="archive-count">6 </div>
        </a>
      
        <a class="archive-link" href="/archives/2022/01 ">
          一月 2022 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2021/10 ">
          十月 2021 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2021/09 ">
          九月 2021 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2021/08 ">
          八月 2021 
          <div class="archive-count">6 </div>
        </a>
      
    </div>
  </div>


    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       

<article id="post-self_Node/024多页面打包" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        多页面打包
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2023-08-25T09:22:10.000Z" itemprop="datePublished">2023-08-25</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
  <a class="meta-cate-link" href="/categories/nodejs/">nodejs</a>
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            2.5k 词 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>多页面打包</title>
        <link rel="shortcut icon" href="../xiaohei.ico">
        <link rel="stylesheet" href="/globalsrc/mynormalize/mynormalize1.2.0.css">
        <link rel="stylesheet" href="/globalsrc/mynormalize/prism.css">
    </head>
    <body class="line-numbers">
        <div class="sidebar"></div>
        <div class="mask"></div>
        <div class="godown"></div>
        <div class="backtop"></div>
        <div class="div1">
            <h2><span id="duo-ye-mian-da-bao">多页面打包</span><a href="#duo-ye-mian-da-bao" class="header-anchor">#</a></h2>
            <p>
                <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/SPA" target="_blank">单页面</a>
                ：单个html文件 ，切换DOM的方式实现不同业务逻辑展示，后续Vue/React再拓展学习
            </p>
            <p>多页面：多个html文件，切换页面实现不同业务逻辑展示</p>
            <div class="div2">
                <h3><span id="shi-li">实例</span><a href="#shi-li" class="header-anchor">#</a></h3>
                <p>需求：把黑马头条-数据管理平台-内容页面-发布页面一起引入打包使用</p>
                <p>步骤：</p>
                <ol>
                    <li>准备源码（html、css、js）放入相应位置，并改用模块化语法导出</li>
                    <li>下载form-serialize包并导入到核心代码中使用</li>
                    <li>
                        配置webpack.config.js多入口和多页面的设置
                        <pre><code class="language-js">// ...
const config = &#123;
    entry: &#123;
        模块名1: path.resolve(__dirname, 'src/入口1.js'),
        模块名2: path.resolve(__dirname, 'src/入口2.js'),
    &#125;,
    output: &#123;
        path: path.resolve(__dirname, 'dist'),
        filename: './[name]/index.js',
    &#125;,
    plugins: [
        new HtmlWebpackPlugin(&#123;
            template: './public/页面1.html', // 模板文件
            filename: './路径/index.html', // 输出文件
            chunks: ['模块名1'],
        &#125;),
        new HtmlWebpackPlugin(&#123;
            template: './public/页面2.html', // 模板文件
            filename: './路径/index.html', // 输出文件
            chunks: ['模块名2'],
        &#125;),
    ],
&#125;;</code></pre>
                    </li>
                    <li>重新打包观察效果</li>
                </ol>
            </div>
            <div class="div2">
                <h3><span id="nei-rong-guan-li-ye">内容管理页</span><a href="#nei-rong-guan-li-ye" class="header-anchor">#</a></h3>
                <p>准备源码</p>
                <p>将之前写的项目heima-Toutiao中的文章管理文件即page/content/index.html放入当前项目public目录下，为了避免冲突将其重命名为content.html</p>
                <p>content.html头部引入的index.css需要自行处理，暂时取消引用</p>
                <p>下方相对路径引入的js文件后续动态注入，先取消引入</p>
                <img src="/assets/images/self_Node/024_cut_01动态注入.png" alt>
                <p>将content页的资源文件放入src/content</p>
                <img src="/assets/images/self_Node/024_cut_02content资源.png" alt>
                <p>content页资源request.js已有，将缺少的auth.js放入utils</p>
                <p>接下来处理content页的index.js</p>
                <p>首先用到了axios，所以需要导入一下（之前是login页的index.js导入了，这里页面不同另外导入）</p>
                <p>当然，为了遵循模块化，我们从request.js中导入axios，而不是直接从node_modules中导入</p>
                <a href="./008模块化.html" target="_blank" class="otherpage">模块化</a>
                <pre><code class="language-js">// content/index.js
import axios from '@/utils/request.js';</code></pre>
                <p>接下来看auth.js</p>
                <p>其中也用到了axios，那么也导入一下，用到了request.js请求/响应拦截器的功能，所以也从request.js中导入</p>
                <p>至于form-serialize插件，当前内容管理页没用到，之后发布文章再使用</p>
                <p>注意：没有导出和导入，只是为了让目标js代码被一起打包进来，参与html最后的运行，则直接导入目标文件的路径即可</p>
                <p>所以对于content页要用到的auth.js和content/index.css，直接在content/index.js中导入路径</p>
                <pre><code class="language-js">import '@/utils/auth.js';
import './index.css';</code></pre>
                <p>设置完成，之后需要在webpack.config.js中配置新的入口</p>
                <p>
                    而打包出口就让webpack按照入口的名字分配，用
                    <code>[name]</code>
                    占位符即可
                </p>
                <p>
                    至于打包的html和css也要在插件中new新的对象，插件生成css可以使用
                    <code>[name]</code>
                    占位符，但是html插件不可以，而是使用chunks来区分要引入哪些打包的模块
                </p>
                <pre><code class="language-js">const config = &#123;
    // entry: path.resolve(__dirname, 'src/login/index.js'),
    entry: &#123;
        login: path.resolve(__dirname, 'src/login/index.js'),
        content: path.resolve(__dirname, 'src/content/index.js'),
    &#125;,
    output: &#123;
        path: path.resolve(__dirname, 'dist'),
        // filename: './login/index.js',
        filename: './[name]/index.js',
        clean: true,
    &#125;,
    plugins: [
        new HtmlWebpackPlugin(&#123;
            template: path.resolve(__dirname, 'public/login.html'), // 模板文件
            filename: path.resolve(__dirname, 'dist/login/index.html'), // 输出文件
            useCdn: process.env.NODE_ENV === 'production', // 生产模式下使用cdn引入的地址
            chunks: ['login'], // 引入哪些打包后的模块（和entry的key一致）
        &#125;),
        new HtmlWebpackPlugin(&#123;
            template: path.resolve(__dirname, 'public/content.html'), // 模板文件
            filename: path.resolve(__dirname, 'dist/content/index.html'), // 输出文件
            useCdn: process.env.NODE_ENV === 'production', // 生产模式下使用cdn引入的地址
            chunks: ['content'],
        &#125;),
        new MiniCssExtractPlugin(&#123;
            filename: './[name]/index.css',
        &#125;), // 生成css文件
        new webpack.DefinePlugin(&#123;
            'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),
        &#125;),
    ],
    // ...
&#125;</code></pre>
                <p>最后一步，重新打包观察</p>
                <img src="/assets/images/self_Node/024_cut_03打包完成.png" alt>
                <p>运行打包后的content/index.html</p>
                <p>未登录时先跳转到了登录页</p>
                <img src="/assets/images/self_Node/024_cut_04未登录.png" alt>
                <p>点击登录后显示成功却未跳转，是因为在登录页的逻辑代码中跳转没加上，现在去加上再重新打包运行</p>
                <pre><code class="language-js">document.querySelector('.btn').addEventListener('click', function () &#123;
    // 验证
    // ...
    (&#123;
    // axios登录请求
    &#125;)
    .then(res => &#123;
        myAlert(true, '登录成功');
        // 添加跳转逻辑及设置token
        localStorage.setItem('token', res.data.token);
        location.href = '../content/index.html';
    &#125;)
    .catch(err => &#123;
        myAlert(false, err.response.data.message);
    &#125;);
    console.log('提交到服务器登录...');
&#125;);</code></pre>
                <p>重新打包后点击登录就能正常跳转了，页面内容也显示无误</p>
                <img src="/assets/images/self_Node/024_cut_05正常登录.png" alt>
            </div>
            <div class="div2">
                <h3><span id="fa-bu-wen-zhang-ye">发布文章页</span><a href="#fa-bu-wen-zhang-ye" class="header-anchor">#</a></h3>
                <p>需求：把发布文章页面一起打包</p>
                <p>步骤：</p>
                <ol>
                    <li>准备发布文章页面源代码，改写成模块化的导出和导入方式</li>
                    <li>修改webpack.config.js的配置，增加一个入口和出口</li>
                    <li>打包观察效果</li>
                </ol>
                <div class="div3">
                    <h4><span id="yuan-ma-zhun-bei">源码准备</span><a href="#yuan-ma-zhun-bei" class="header-anchor">#</a></h4>
                    <p>首先准备源码，之前编写的发布页publish中index.html放入当前项目public下并更名为publish.html，另外的资源文件index.css和index.js放入资源目录src/publish下</p>
                    <p>第一步来处理publish.html</p>
                    <p>头部的css文件除了我们自己编写的index.css需要引入到入口index.js中处理，其余的直接使用cdn的方式引入即可，所以先取消index.css的引入</p>
                    <p>底部的js文件：axios、form-serialize、wangeditor三个可以在生产环境下用cdn，开发环境下载本地</p>
                    <p>其余的以相对路径引入的工具包需要我们自己引入到入口js中处理，所以可以先取消引入</p>
                    <pre><code class="language-html">&lt;%if(htmlWebpackPlugin.options.useCdn)&#123;%&gt;
&lt;script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.4/axios.min.js"&gt;&lt;/script&gt;
&lt;script src="http://unpkg.com/form-serialize@0.7.2/index.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.bootcdn.net/ajax/libs/wangeditor5/5.1.23/index.min.js"&gt;&lt;/script&gt;
&lt;%&#125;%&gt;
&lt;script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.3/js/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;script src="../../utils/request.js"&gt;&lt;/script&gt;
&lt;script src="../../utils/editor.js"&gt;&lt;/script&gt;
&lt;script src="../../utils/auth.js"&gt;&lt;/script&gt;
&lt;script src="../../utils/alert.js"&gt;&lt;/script&gt;
&lt;script src="./index.js"&gt;&lt;/script&gt;</code></pre>
                </div>
                <div class="div3">
                    <h4><span id="ku-xia-zai">库下载</span><a href="#ku-xia-zai" class="header-anchor">#</a></h4>
                    <p>之后来把三个库下载到本地</p>
                    <p>
                        axios已经下载过了，而对于另外两个：form-serialize和wangeditor，我们不确定它们用npm下载时的名字，可以去
                        <a href="https://www.npmjs.com/" target="_blank">https://www.npmjs.com/</a>
                        查找插件的名字进行下载
                    </p>
                    <img src="/assets/images/self_Node/024_cut_06npm查找名字.png" alt>
                    <img src="/assets/images/self_Node/024_cut_07npm查找名字.png" alt>
                </div>
                <div class="div3">
                    <h4><span id="gong-ju-dao-chu-dao-ru">工具导出导入</span><a href="#gong-ju-dao-chu-dao-ru" class="header-anchor">#</a></h4>
                    <p>下载完成后往下继续，request.js每个页面都会引入，已经处理好了，跳过</p>
                    <p>editor.js放入utils，剩下的三个也已经准备好</p>
                    <p><strong>注意导入时'@'后面不要少'/'</strong></p>
                    <p>然后对index.js进行处理，首先要导入request.js暴露的axios</p>
                    <pre><code class="language-js">// index.js
import axios from '@/utils/request.js';
// ...</code></pre>
                    <p>在下面的逻辑代码中需要使用wangeditor，所以在editor.js进行处理</p>
                    <pre><code class="language-js">// editor.js
// 顶部导入wangeditor
const wangEditor = require('@wangeditor/editor');
// 底部导出要暴露的editor对象
export default editor;</code></pre>
                    <p>editor.js暴露出editor之后，index.js就可以导入以使用editor</p>
                    <pre><code class="language-js">import editor from '@/utils/editor.js';
// ...</code></pre>
                    <p>auth.js用于判断操作权限，有无token，除了登录页都需要，所以直接在入口index.js最顶部导入即可，无需暴露什么变量</p>
                    <pre><code class="language-js">import '@/utils/auth.js';
// ...</code></pre>
                    <p>alert.js之前使用过，采用了命名导出的方式将myAlert函数导出，入口index.js用命名方式导入即可</p>
                    <pre><code class="language-js">import &#123; myAlert &#125; from '@/utils/alert.js';
// ...</code></pre>
                    <p>index.css直接导入即可</p>
                    <pre><code class="language-js">import './index.css';
// ...</code></pre>
                    <p>补充：还有serialize函数需引入</p>
                    <pre><code class="language-js">import serialize from 'form-serialize';
// ...</code></pre>
                </div>
                <div class="div3">
                    <h4><span id="webpack-config-js-pei-zhi">webpack.config.js配置</span><a href="#webpack-config-js-pei-zhi" class="header-anchor">#</a></h4>
                    <p>与内容管理页一样，设置入口-出口-插件生成页面</p>
                    <pre><code class="language-js">const config = &#123;
    // entry: path.resolve(__dirname, 'src/login/index.js'),
    entry: &#123;
        login: path.resolve(__dirname, 'src/login/index.js'),
        content: path.resolve(__dirname, 'src/content/index.js'),
        publish: path.resolve(__dirname, 'src/publish/index.js'),
    &#125;,
    output: &#123;
        path: path.resolve(__dirname, 'dist'),
        // filename: './login/index.js',
        filename: './[name]/index.js',
        clean: true,
    &#125;,
    plugins: [
        new HtmlWebpackPlugin(&#123;
            template: path.resolve(__dirname, 'public/login.html'), // 模板文件
            filename: path.resolve(__dirname, 'dist/login/index.html'), // 输出文件
            useCdn: process.env.NODE_ENV === 'production', // 生产模式下使用cdn引入的地址
            chunks: ['login'], // 引入哪些打包后的模块（和entry的key一致）
        &#125;),
        new HtmlWebpackPlugin(&#123;
            template: path.resolve(__dirname, 'public/content.html'), // 模板文件
            filename: path.resolve(__dirname, 'dist/content/index.html'), // 输出文件
            useCdn: process.env.NODE_ENV === 'production', // 生产模式下使用cdn引入的地址
            chunks: ['content'],
        &#125;),
        new HtmlWebpackPlugin(&#123;
            template: path.resolve(__dirname, 'public/publish.html'), // 模板文件
            filename: path.resolve(__dirname, 'dist/publish/index.html'), // 输出文件
            useCdn: process.env.NODE_ENV === 'production', // 生产模式下使用cdn引入的地址
            chunks: ['publish'],
        &#125;),
        new MiniCssExtractPlugin(&#123;
            filename: './[name]/index.css',
        &#125;), // 生成css文件
        new webpack.DefinePlugin(&#123;
            'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),
        &#125;),
    ],
    // ...
&#125;</code></pre>
                    <p>配置完成，打包！</p>
                    <img src="/assets/images/self_Node/024_cut_08打包完成.png" alt>
                    <p>
                        <strong>小问题</strong>
                        ：在打包时，花费时间长，生产环境无需打包的form-serialize和wangeditor被打包了
                    </p>
                    <img src="/assets/images/self_Node/024_cut_09外部扩展.png" alt>
                    <p>这是因为webpack.config.js中的外部扩展我们忘记配置了，现在加上这两项再重新打包</p>
                    <pre><code class="language-js">// 生产环境下使用相关的配置
if (process.env.NODE_ENV === 'production') &#123;
    // 外部扩展（让webpack防止import的包被打包进来）
    config.externals = &#123;
        // key:import from 语句后面的字符串
        // value:留在原地的全局变量（最好和cdn在全局暴露的变量一致）
        'bootstrap/dist/css/bootstrap.min.css': 'bootstrap',
        axios: 'axios',
        'form-serialize': 'serialize',
        '@wangeditor/editor': 'wangEditor',
    &#125;;
&#125;</code></pre>
                    <p>打包打包看效果！</p>
                    <img src="/assets/images/self_Node/024_cut_10发布页效果.png" alt>
                    <p>测试功能完整</p>
                    <img src="/assets/images/self_Node/024_cut_11测试功能.png" alt>
                </div>
            </div>
        </div>
        <script src="/globalsrc/mynormalize/prism.js"></script>
        <script src="/globalsrc/mynormalize/trans-animate.js"></script>
        <script src="/globalsrc/mynormalize/mynormalize.js"></script>
    </body>
</html>

        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/2023/08/25/self_Node/025%E4%BC%98%E5%8C%96-%E5%88%86%E5%89%B2%E5%85%AC%E5%85%B1%E4%BB%A3%E7%A0%81/"
      title="优化-分割公共代码"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        优化-分割公共代码
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/2023/08/25/self_Node/023%E4%BC%98%E5%8C%96-CDN%E4%BD%BF%E7%94%A8/"
      title="优化-CDN使用"
     >

    <p class="title-text">
      
        优化-CDN使用
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>

 
    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2023 changfeng_E<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn hide" onclick="topFunction()">
        <span class="material-symbols-rounded">keyboard_arrow_up</span>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.classList.remove('hide')
        } else {
            btn.classList.add('hide')
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/js/light-dark-switch.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
</body>
</html>
